# Node.js
# Build a general Node.js project with npm.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

trigger:
  tags:
    include:
    - v*
  branches:
    include:
    - '*'


pool:
  name: 'DEBJE'

steps:
# - task: NodeTool@0
#   inputs:
#     versionSpec: '10.x'
#   displayName: 'Install Node.js'

- script: |
    npm install --registry  http://10.3.101.26:4873
    npm run build
  displayName: 'npm install and build'
- script: |
    npm publish --registry  http://10.3.101.26:4873
  displayName: 'npm publish'
  condition: and(succeeded(), startsWith(variables['Build.SourceBranch'], 'refs/tags/'))
